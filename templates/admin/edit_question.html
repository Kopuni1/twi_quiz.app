{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">Edit Quiz Question</h1>

    <form action="{{ url_for('edit_question', question_id=question.id) }}" method="POST" class="space-y-4">
        <!-- Category -->
        <div>
            <label class="block font-semibold">Category</label>
            <input type="text" name="category" class="w-full border rounded px-3 py-2" value="{{ question.category }}" required>
        </div>

        <!-- Question -->
        <div>
            <label class="block font-semibold">Question</label>
            <textarea name="question" class="w-full border rounded px-3 py-2" rows="3" required>{{ question.question }}</textarea>
        </div>

        <!-- Options -->
        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block font-semibold">Option A</label>
                <input type="text" name="option_a" class="w-full border rounded px-3 py-2" value="{{ question.option_a }}" required>
            </div>
            <div>
                <label class="block font-semibold">Option B</label>
                <input type="text" name="option_b" class="w-full border rounded px-3 py-2" value="{{ question.option_b }}" required>
            </div>
            <div>
                <label class="block font-semibold">Option C</label>
                <input type="text" name="option_c" class="w-full border rounded px-3 py-2" value="{{ question.option_c }}" required>
            </div>
            <div>
                <label class="block font-semibold">Option D</label>
                <input type="text" name="option_d" class="w-full border rounded px-3 py-2" value="{{ question.option_d }}" required>
            </div>
        </div>

        <!-- Correct Option -->
        <div>
            <label class="block font-semibold">Correct Option</label>
            <select name="correct_option" class="w-full border rounded px-3 py-2" required>
                <option value="">Select correct option</option>
                <option value="A" {% if question.correct_option == 'A' %}selected{% endif %}>A</option>
                <option value="B" {% if question.correct_option == 'B' %}selected{% endif %}>B</option>
                <option value="C" {% if question.correct_option == 'C' %}selected{% endif %}>C</option>
                <option value="D" {% if question.correct_option == 'D' %}selected{% endif %}>D</option>
            </select>
        </div>

        <!-- Difficulty -->
        <div>
            <label class="block font-semibold">Difficulty</label>
            <select name="difficulty" class="w-full border rounded px-3 py-2">
                <option value="easy" {% if question.difficulty == 'easy' %}selected{% endif %}>Easy</option>
                <option value="medium" {% if question.difficulty == 'medium' %}selected{% endif %}>Medium</option>
                <option value="hard" {% if question.difficulty == 'hard' %}selected{% endif %}>Hard</option>
            </select>
        </div>

        <!-- Audio Filename -->
        <div>
            <label class="block font-semibold">Audio Filename (optional)</label>
            <input type="text" name="audio_filename" class="w-full border rounded px-3 py-2" value="{{ question.audio_filename }}" placeholder="e.g., Adom.mp3">
            <p class="text-gray-500 text-sm mt-1">Make sure the file exists in <code>static/audio/</code></p>

            {% if question.audio_filename %}
            <p class="mt-2 font-medium text-gray-700">Current audio:</p>
            <audio controls class="mt-1">
                <source src="{{ url_for('static', filename='audio/' ~ question.audio_filename) }}" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            {% endif %}
        </div>

        <!-- Buttons -->
        <div>
            <button type="submit" class="px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700">
                Update Question
            </button>
            <a href="{{ url_for('view_all_questions') }}" class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}
